<!DOCTYPE html>

<head>
	<meta content="text/html;charset=utf-8" http-equiv="Content-Type">
<meta content="utf-8" http-equiv="encoding">
	<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css" integrity="sha384-rwoIResjU2yc3z8GV/NPeZWAv56rSmLldC3R/AZzGRnGxQQKnKkoFVhFQhNUwEyJ" crossorigin="anonymous">
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/js/bootstrap.min.js" integrity="sha384-vBWWzlZJ8ea9aCX4pEW3rVHjgjt7zpkNpZk+02D9phzyeVkE+jo0ieGizqPLForn" crossorigin="anonymous"></script>
    <!-- <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script> -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>

    <!-- Forge (cryptography library) -->
    <script src="https://cdn.jsdelivr.net/npm/node-forge@0.7.0/dist/forge.min.js"></script>
    <script src="js/script.js"></script>
    <script>
        $(document).ready(function() {
            $('[data-toggle="tooltip"]').tooltip();
        });
    </script>

    <!-- imbedded style -->
    <style>
        #wrapper {
            margin-left: 25%;
            margin-right: 25%;
        }

	#header {
		padding-bottom: 2%;
	}
    </style>
    <title>Contact Manager: Group 16<3</title>
</head>

<body>
    <div id="wrapper">
        <div id="header">
            <h1 href=""><a href="http://cop4331-group16.com/" "" data-toggle="tooltip" title=" Cool contact manager" style="text-decoration: none;"> üçï Contact Manager üíñ </a></h1>
        </div>
        <form id="loginForm" style="display:block; visibility:visible;">
            <div class="form-group">
                <!-- <div class="container-fluid"> -->
                <div id="userBox"> username:
                    <input id="userNameText"=t ype="text" placeholder="username" /> </div>
                <br/>
                <div id="passBox"> password:
                    <input id="passwordText" type="password" placeholder="password" /> </div>
                <br/>
                <button type="button" class="btn btn-outline-primary" onclick="login();">Login</button>
                <a href="signup.html"> <button type="button" class="btn btn-outline-success" style="margin-left:5%;">Sign up</button> </a>

            </div>

            <div class="alert alert-success" role="alert" style="display:none; visibility:hidden;" id="successBox">
                <strong>Success!</strong>
                <p id="successL"> </p>
                <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
	    <div class="alert alert-danger" role="alert" style="display:none; visibility:hidden;" id="warningBox">
  <button type="button" class="close" data-dismiss="alert" aria-label="Close">
    <span aria-hidden="true">&times;</span>
  </button>
  <strong>Login Error!</strong> One or more fields are probably empty.
</div>
        </form>
<div id="contacts_container">
<!-- <h3> Contacts </h3>
 <input type="text" id="myInput" onkeyup="tablesearch();" placeholder="Search for names.."> -->
 <!-- <table class="table table-striped" id="myTable">
 <table class="table table-dark" id="myTable">
    <thead>
        <tr class="header">
            <th>Firstname</th>
            <th>Lastname</th>
            <th>Address</th>
            <th>Phone Number</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>Taharka</td>
            <td>Rainbows</td>
            <td>1234 something dr.</td>
            <td>123-456-7890</td>
        </tr>
        <tr>
            <td>Cole</td>
            <td>Flowers</td>
            <td>1234 amazing blvd.</td>
            <td>123-456-7890</td>
        </tr>
        <tr>
            <td>Jamison</td>
            <td>Unicorn</td>
            <td>1234 friendship ln.</td>
            <td>123-456-7890</td>
        </tr>
        <tr>
            <td>Justin</td>
            <td>BeeLover III</td>
            <td>1234 smiley dr.</td>
            <td>123-456-7890</td>
        </tr>
        <tr>
            <td>Jason</td>
            <td>Daffodils</td>
            <td>1234 sprinkles ln.</td>
            <td>123-456-7890</td>
        </tr>
    </tbody>
</table> -->
</div>
        <!-- <p id="view"></p> -->
<div id="queryForm" style="display:none; visibility:hidden;">
    <h3> Contacts </h3>
    <p id="view"></p>

    <br/><div style="border-bottom: 1px solid #ccc;"></div> <br/>
    <h6>Search:</h6> <input type="text" id="myInput" onkeyup="tablesearch();" placeholder="Search for names.."> <br /> <br />
    <h6> Add </h6>
        <form id="AddForm" class="form-group" style="margin-left:5%;">
            <label style="margin-left:auto;">First Name:</label>  <input class="form-control" type="text" id="firstNameBox"><br/>
            <label style="margin-left:auto;">Last Name:</label>  <input class="form-control" type="text" id="lastNameBox"><br/>
            <label style="margin-left:auto;">Email:</label> <input class="form-control" type="email" id="emailBox" placeholder="youreawesome@goyou.com"><br/>
            <label style="margin-left:auto;">Phone: <input class="form-control" type="tel" placeholder="1-(555)-555-5555" id="phoneBox"/></label> <br/>
            <br/>
            <button type="button" class="btn btn-primary" onclick="addBtn();">Add</button>
        </form>
</div>

    </div>
</body>
<!-- This script is for search -->
<script>
function tablesearch() {
  // Declare variables
  var input, filter, table, tr, td, i;
  input = document.getElementById("myInput");
  filter = input.value.toUpperCase();
  table = document.getElementById("myTable");
  tr = table.getElementsByTagName("tr");

  // Loop through all table rows, and hide those who don't match the search query
  for (i = 0; i < tr.length; i++) {
    td = tr[i].getElementsByTagName("td")[0];
    if (td) {
      if (td.innerHTML.toUpperCase().indexOf(filter) > -1) {
        tr[i].style.display = "";
      } else {
        tr[i].style.display = "none";
      }
    }
  }
}
</script>
<script type= "text/javascript" src="js/script.js"></script>
<script type="text/javascript">
    $(document).on('click', '#rowBtn', function(){
        var prepJson = [];
        var row = $(this).closest("tr");
        var td = row.find("td");
        $.each(td, function() {
        console.log($(this).text());
        prepJson.push($(this).text());
    });
    $(this).parents('tr').remove();

        console.log("Print array: " + prepJson);

     var jsonPayload = '{"userid" :'+ userid +', "firstname" : "' + prepJson[0] + '", "lastname" : "' + prepJson[1] + '", "email" : "' + prepJson[2] + '", "phone" : "' + prepJson[3] + '"}';
    console.log(jsonPayload);
    //console.log(userid);
		//console.log(typeof userid);

    var xhr = new XMLHttpRequest();
    xhr.open("POST", url + "API/delete" + ext, false);
    xhr.setRequestHeader("Content-type", "application/json; charset=UTF-8");

	try {
        xhr.send(jsonPayload);
        var jsonReceive = JSON.parse( xhr.responseText );
    }
    catch(err) {
        console.log(err);
    }
})
    //$(".alert").alert()
</script>
</html>
